{"version":3,"sources":["components/Login.js","components/Home.js","components/Header.js","App.js","serviceWorker.js","config.js","index.js"],"names":["Login","props","onSignIn","style","display","flexDirection","justifyContent","alignItems","margin","onClick","Home","state","handleSubmit","e","preventDefault","firebase","collection","add","author","message","dateSent","Date","then","setState","updatePosition","window","setTimeout","messageBody","document","getElementById","scrollTop","scrollHeight","clientHeight","handleMessageChange","target","value","messages","user","displayName","orderBy","onSnapshot","querySnapshot","forEach","doc","data","id","toDate","push","result","characters","charactersLength","length","i","charAt","Math","floor","random","Fragment","onSubmit","this","Row","className","noGutters","Col","xs","type","onChange","placeholder","Button","variant","flex","map","Alert","key","Heading","toLocaleString","Component","Header","Navbar","bg","Brand","photoURL","src","alt","height","marginRight","borderRadius","onSignOut","App","signIn","provider","GoogleAuthProvider","setCustomParameters","login_hint","signInWithPopup","signOut","componentDidMount","onAuthStateChanged","path","exact","render","Boolean","location","hostname","match","config","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","ReactDOM","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.d26bdd4b.chunk.js","sourcesContent":["import React from \"react\";\nimport GoogleButton from \"react-google-button\";\n\nconst Login = props => {\n  const { onSignIn } = props;\n  return (\n    <div\n      style={{\n        display: \"flex\",\n        flexDirection: \"row\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        margin: \"40px\"\n      }}\n    >\n      <GoogleButton onClick={onSignIn} />\n    </div>\n  );\n};\n\nexport default Login;\n","import React, { Component } from \"react\";\nimport \"../App.css\";\nimport * as firebase from \"firebase\";\nimport { Button, Alert, Row, Col } from \"react-bootstrap\";\n\nclass Home extends Component {\n  state = {};\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      messages: [],\n      author: props.user.displayName,\n      message: \"\"\n    };\n  }\n\n  componentDidMount() {\n    const db = firebase.firestore();\n\n    db.collection(\"messages\")\n      .orderBy(\"dateSent\")\n      .onSnapshot(querySnapshot => {\n        const messages = [];\n        querySnapshot.forEach(doc => {\n          const message = doc.data();\n          message.id = doc.id;\n          message.dateSent = message.dateSent.toDate();\n          messages.push(message);\n        });\n\n        this.setState({\n          messages\n        });\n\n        this.updatePosition();\n      });\n  }\n\n  generateAuthorName() {\n    let result = \"\";\n    const characters = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz\";\n    const charactersLength = characters.length;\n    for (var i = 0; i < 8; i++) {\n      result += characters.charAt(Math.floor(Math.random() * charactersLength));\n    }\n    return result;\n  }\n\n  handleSubmit = e => {\n    e.preventDefault();\n\n    const db = firebase.firestore();\n    db.collection(\"messages\")\n      .add({\n        author: this.state.author,\n        message: this.state.message,\n        dateSent: new Date()\n      })\n      .then(() => {\n        this.setState({\n          message: \"\"\n        });\n\n        this.updatePosition();\n      });\n  };\n\n  updatePosition = () => {\n    window.setTimeout(function() {\n      const messageBody = document.getElementById(\"messages\");\n      messageBody.scrollTop =\n        messageBody.scrollHeight - messageBody.clientHeight;\n    }, 500);\n  };\n\n  handleMessageChange = e => {\n    this.setState({\n      message: e.target.value\n    });\n  };\n\n  render() {\n    return (\n      <React.Fragment>\n        <form onSubmit={this.handleSubmit}>\n          <Row className=\"inputs\" noGutters={true}>\n            <Col xs={10}>\n              <input\n                className=\"input-box\"\n                type=\"text\"\n                value={this.state.message}\n                onChange={this.handleMessageChange}\n                placeholder=\"message\"\n              />\n            </Col>\n            <Col xs={2}>\n              <Button variant=\"info\" className=\"input-button\" type=\"submit\">\n                submit\n              </Button>\n            </Col>\n          </Row>\n        </form>\n\n        <div\n          className=\"messages\"\n          id=\"messages\"\n          style={{\n            display: \"flex\",\n            flexDirection: \"row\",\n            alignItems: \"center\",\n            justifyContent: \"center\"\n          }}\n        >\n          <div style={{ flex: 0.5 }}>\n            {this.state.messages.map(message => (\n              <Alert\n                key={message.id}\n                className={\n                  message.author === this.state.author\n                    ? \"bubble right-bubble\"\n                    : \"bubble left-bubble\"\n                }\n                variant={\n                  message.author === this.state.author ? \"primary\" : \"success\"\n                }\n              >\n                <p>{message.author}</p>\n                <Alert.Heading>{message.message}</Alert.Heading>\n                <small>{message.dateSent.toLocaleString()}</small>\n              </Alert>\n            ))}\n          </div>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default Home;\n","import React from \"react\";\nimport { Navbar, Button } from \"react-bootstrap\";\n\nconst Header = props => {\n  return (\n    <Navbar\n      bg=\"dark\"\n      variant=\"dark\"\n      style={{\n        flexDirection: \"row\",\n        justifyContent: \"space-between\",\n        alignItems: \"center\"\n      }}\n    >\n      <Navbar.Brand>react-chat</Navbar.Brand>\n      {props.user && (\n        <span>\n          {props.user.photoURL && (\n            <img\n              src={props.user.photoURL}\n              alt=\"profile\"\n              height=\"35px\"\n              style={{ marginRight: \"10px\", borderRadius: \"20px\" }}\n            />\n          )}\n          <Button variant=\"danger\" onClick={props.onSignOut}>\n            signout\n          </Button>\n        </span>\n      )}\n    </Navbar>\n  );\n};\n\nexport default Header;\n","import React, { Component } from \"react\";\nimport \"./App.css\";\nimport Login from \"./components/Login\";\nimport Home from \"./components/Home\";\nimport * as firebase from \"firebase\";\nimport { BrowserRouter as Router, Route } from \"react-router-dom\";\nimport Header from \"./components/Header\";\n\nclass App extends Component {\n  state = {\n    user: null\n  };\n\n  signIn = () => {\n    const provider = new firebase.auth.GoogleAuthProvider();\n    provider.setCustomParameters({\n      login_hint: \"user@example.com\"\n    });\n    firebase.auth().signInWithPopup(provider);\n  };\n\n  signOut = () => {\n    firebase.auth().signOut();\n  };\n\n  componentDidMount = () => {\n    firebase.auth().onAuthStateChanged(user => {\n      this.setState({\n        user\n      });\n    });\n  };\n\n  render() {\n    return (\n      <React.Fragment>\n        <Header user={this.state.user} onSignOut={this.signOut}></Header>\n\n        <Router>\n          <Route\n            path=\"/\"\n            exact\n            render={() =>\n              this.state.user ? (\n                <Home user={this.state.user}></Home>\n              ) : (\n                <Login onSignIn={this.signIn}></Login>\n              )\n            }\n          />\n        </Router>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","export const APIKEY = \"AIzaSyCP1wlIxiqFnbfE0OevMxqmgk1v6mzaViA\";\nexport const AUTHDOMAIN = \"react-chat-76f89.firebaseapp.com\";\nexport const DATABASEURL = \"https://react-chat-76f89.firebaseio.com\";\nexport const PROJECTID = \"react-chat-76f89\";\nexport const STORAGEBUCKET = \"react-chat-76f89.appspot.com\";\nexport const MESSAGINGSENDERID = \"483575731254\";\nexport const APPID = \"1:483575731254:web:5eaf0176da238c9b\";\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport * as firebase from \"firebase\";\nimport * as CONFIG from \"./config\";\n\nconst config = {\n  apiKey: CONFIG.APIKEY,\n  authDomain: CONFIG.AUTHDOMAIN,\n  databaseURL: CONFIG.DATABASEURL,\n  projectId: CONFIG.PROJECTID,\n  storageBucket: CONFIG.STORAGEBUCKET,\n  messagingSenderId: CONFIG.MESSAGINGSENDERID,\n  appId: CONFIG.APPID\n};\n\nfirebase.initializeApp(config);\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}